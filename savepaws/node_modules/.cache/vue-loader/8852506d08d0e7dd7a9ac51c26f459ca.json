{"remainingRequest":"/Users/mac/Desktop/save-pets-ui/savepaws/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/save-pets-ui/savepaws/src/ui/s-upload.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Desktop/save-pets-ui/savepaws/src/ui/s-upload.vue","mtime":1598946241123},{"path":"/Users/mac/Desktop/save-pets-ui/savepaws/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/save-pets-ui/savepaws/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mac/Desktop/save-pets-ui/savepaws/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/save-pets-ui/savepaws/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtc3ludGF4LCBuby1hd2FpdC1pbi1sb29wICovCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAicy11cGxvYWQiLAoKICBpbmhlcml0QXR0cnM6IGZhbHNlLAoKICBwcm9wczogewogICAgbGFiZWw6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsLAogICAgfSwKICAgIHRpcDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwsCiAgICB9LAogICAgdmFsdWU6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6ICgpID0+IFtdLAogICAgfSwKICB9LAoKICBtZXRob2RzOiB7CiAgICB0b0Jhc2U2NChmaWxlKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsKICAgICAgICByZWFkZXIub25sb2FkID0gKCkgPT4gcmVzb2x2ZShyZWFkZXIucmVzdWx0KTsKICAgICAgICByZWFkZXIub25lcnJvciA9IChlKSA9PiByZWplY3QoZSk7CiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIGhhbmRsZVVwbG9hZCh7dGFyZ2V0fSkgewogICAgICBjb25zdCB7ZmlsZXN9ID0gdGFyZ2V0OwoKICAgICAgaWYgKCFmaWxlcy5sZW5ndGgpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHBob3RvcyA9IFtdOwoKICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7CiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy50b0Jhc2U2NChmaWxlKTsKICAgICAgICBwaG90b3MucHVzaChyZXN1bHQpOwogICAgICB9CgogICAgICB0aGlzLiRlbWl0KCJpbnB1dCIsIFsuLi50aGlzLnZhbHVlLCAuLi5waG90b3NdKTsKCiAgICAgIHRoaXMucmVzZXRGaWxlSW5wdXRzKCk7CiAgICB9LAogICAgcmVzZXRGaWxlSW5wdXRzKCkgewogICAgICBpZiAodGhpcy4kcmVmcy5wcmltYXJ5KSB7CiAgICAgICAgdGhpcy4kcmVmcy5wcmltYXJ5LnZhbHVlID0gIiI7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLiRyZWZzLnNlY29uZGFyeSkgewogICAgICAgIHRoaXMuJHJlZnMuc2Vjb25kYXJ5LnZhbHVlID0gIiI7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVSZW1vdmUoaWR4KSB7CiAgICAgIGNvbnN0IHBob3RvcyA9IHRoaXMudmFsdWUuZmlsdGVyKChfLCBpKSA9PiBpZHggIT09IGkpOwogICAgICB0aGlzLiRlbWl0KCJpbnB1dCIsIHBob3Rvcyk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["s-upload.vue"],"names":[],"mappings":";AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"s-upload.vue","sourceRoot":"src/ui","sourcesContent":["<script>\n/* eslint-disable no-restricted-syntax, no-await-in-loop */\nexport default {\n  name: \"s-upload\",\n\n  inheritAttrs: false,\n\n  props: {\n    label: {\n      type: String,\n      default: null,\n    },\n    tip: {\n      type: String,\n      default: null,\n    },\n    value: {\n      type: Array,\n      default: () => [],\n    },\n  },\n\n  methods: {\n    toBase64(file) {\n      return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.readAsDataURL(file);\n        reader.onload = () => resolve(reader.result);\n        reader.onerror = (e) => reject(e);\n      });\n    },\n    async handleUpload({target}) {\n      const {files} = target;\n\n      if (!files.length) {\n        return;\n      }\n\n      const photos = [];\n\n      for (const file of files) {\n        const result = await this.toBase64(file);\n        photos.push(result);\n      }\n\n      this.$emit(\"input\", [...this.value, ...photos]);\n\n      this.resetFileInputs();\n    },\n    resetFileInputs() {\n      if (this.$refs.primary) {\n        this.$refs.primary.value = \"\";\n      }\n\n      if (this.$refs.secondary) {\n        this.$refs.secondary.value = \"\";\n      }\n    },\n    handleRemove(idx) {\n      const photos = this.value.filter((_, i) => idx !== i);\n      this.$emit(\"input\", photos);\n    },\n  },\n};\n</script>\n\n<template>\n  <div class=\"s-upload\">\n    <label v-if=\"!value.length\">\n      <span\n        v-if=\"label\"\n        class=\"s-upload__label\"\n      >\n        {{label}}\n      </span>\n\n      <span\n        v-if=\"tip\"\n        class=\"s-upload__tip\"\n      >\n        {{tip}}\n      </span>\n\n      <div class=\"s-upload__icon\">\n        <img\n          src=\"../assets/img/camera.jpg\"\n          alt=\"Завантажити файли\"\n        >\n      </div>\n\n      <input\n        ref=\"primary\"\n        type=\"file\"\n        v-bind=\"$attrs\"\n        multiple\n        class=\"s-upload__control\"\n        @change=\"handleUpload\"\n      >\n    </label>\n\n    <ul\n      v-else\n      class=\"s-upload__preview-list\"\n    >\n      <li\n        v-for=\"(photo, key) in value\"\n        :key=\"key\"\n        class=\"s-upload__preview-item\"\n        @click=\"handleRemove(key)\"\n      >\n        <div class=\"s-upload__preview-wrap\">\n          <img\n            :src=\"photo\"\n            :alt=\"`Фото тварини № ${key}`\"\n          >\n        </div>\n      </li>\n\n      <li class=\"s-upload__preview-upload\">\n        <label>\n          <input\n            ref=\"secondary\"\n            type=\"file\"\n            v-bind=\"$attrs\"\n            multiple\n            class=\"s-upload__control\"\n            @change=\"handleUpload\"\n          >\n        </label>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.s-upload {\n  display: flex;\n  justify-content: center;\n\n  label {\n    display: inline-block;\n  }\n}\n\n.s-upload__control {\n  appearance: none;\n  width: 1px;\n  height: 1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  position: absolute;\n}\n\n.s-upload__label {\n  color: var(--primary-text);\n  font-size: 16px;\n  text-align: center;\n  display: block;\n}\n\n.s-upload__icon {\n  width: 51px;\n  height: 41px;\n  margin: 4px auto;\n}\n\n.s-upload {\n  display: block;\n  margin-top: 5px;\n\n  text-align: center;\n  font-size: 13px;\n  line-height: 20px;\n  letter-spacing: -0.24px;\n  font-style: italic;\n  color: rgba(51, 51, 51, 0.5);\n}\n\n.s-upload__preview-list {\n  display: flex;\n  flex-wrap: wrap;\n\n  list-style: none;\n  padding: 0;\n}\n\n.s-upload__preview-upload {\n  flex: 1 0 70px;\n  display: flex;\n\n  justify-content: center;\n  align-items: center;\n\n  label {\n    display: block;\n    width: 100%;\n    height: 60px;\n    border-radius: 10px;\n    background: #F1F1F2 url('../assets/vector/plus.pure.svg') center center no-repeat;\n  }\n}\n\n.s-upload__preview-item {\n  flex: 1 0;\n  margin: 15px 5px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.s-upload__preview-wrap {\n  position: relative;\n  width: 70px;\n\n  &::after {\n    content: '';\n\n    position: absolute;\n    right: -5px;\n    top: -5px;\n\n    width: 17px;\n    height: 17px;\n    background: #F1F1F2 url('../assets/vector/close.pure.svg') center center no-repeat;\n    border-radius: 50%;\n  }\n\n  img {\n    width: 70px;\n    height: 60px;\n    object-fit: cover;\n    object-position: center;\n    border-radius: 10px;\n  }\n}\n</style>\n"]}]}