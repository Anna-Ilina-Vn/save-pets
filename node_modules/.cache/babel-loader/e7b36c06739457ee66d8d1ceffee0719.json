{"remainingRequest":"/Users/mac/Desktop/save-pets-ui/node_modules/babel-loader/lib/index.js!/Users/mac/Desktop/save-pets-ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mac/Desktop/save-pets-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/save-pets-ui/src/views/find-location-view.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Desktop/save-pets-ui/src/views/find-location-view.vue","mtime":1598014449364},{"path":"/Users/mac/Desktop/save-pets-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/save-pets-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mac/Desktop/save-pets-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/save-pets-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICIvVXNlcnMvbWFjL0Rlc2t0b3Avc2F2ZS1wZXRzLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKaW1wb3J0IHsgZ21hcEFwaSB9IGZyb20gInZ1ZTItZ29vZ2xlLW1hcHMiOwppbXBvcnQgKiBhcyB2aWV3cyBmcm9tICIuLi9saWIvdmlld3MtbGlzdCI7CmltcG9ydCBNYW51YWxMb2NhdGlvbiBmcm9tICIuLi9jb21wb25lbnRzL21hbnVhbC1sb2NhdGlvbi52dWUiOwppbXBvcnQgU0J1dHRvbiBmcm9tICIuLi9jb21wb25lbnRzL3MtYnV0dG9uLnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiZmluZC1sb2NhdGlvbi12aWV3IiwKICBjb21wb25lbnRzOiB7CiAgICBNYW51YWxMb2NhdGlvbjogTWFudWFsTG9jYXRpb24sCiAgICBTQnV0dG9uOiBTQnV0dG9uCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY29vcmRzOiB7CiAgICAgICAgbGF0OiA1MC40LAogICAgICAgIGxuZzogMzAuNgogICAgICB9LAogICAgICBpc0Nvb3Jkc0VudGVyZWQ6IGZhbHNlLAogICAgICBpbnB1dExvY2F0aW9uOiAiIiwKICAgICAgem9vbTogMTcKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgZ29vZ2xlOiBnbWFwQXBpLAogICAgaXNWYWxpZENvb3JkczogZnVuY3Rpb24gaXNWYWxpZENvb3JkcygpIHsKICAgICAgcmV0dXJuICEhdGhpcy5jb29yZHMubGF0ICYmICEhdGhpcy5jb29yZHMubG5nICYmIHRoaXMuaXNDb29yZHNFbnRlcmVkOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgaWYgKG5hdmlnYXRvci5nZW9sb2NhdGlvbikgewogICAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgdmFyIGNvb3JkcyA9IF9yZWYuY29vcmRzOwogICAgICAgIHZhciBsYXQgPSBjb29yZHMubGF0aXR1ZGUsCiAgICAgICAgICAgIGxuZyA9IGNvb3Jkcy5sb25naXR1ZGU7CiAgICAgICAgX3RoaXMuY29vcmRzID0gewogICAgICAgICAgbG5nOiBsbmcsCiAgICAgICAgICBsYXQ6IGxhdAogICAgICAgIH07CgogICAgICAgIF90aGlzLmNvb3Jkc0VudGVyZWQoKTsKCiAgICAgICAgX3RoaXMucnVuR2VvY29kZSgpOwogICAgICB9LCB0aGlzLmNvb3Jkc0RlbmllZCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBydW5HZW9jb2RlOiBmdW5jdGlvbiBydW5HZW9jb2RlKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBnZW9jb2RlciA9IG5ldyB0aGlzLmdvb2dsZS5tYXBzLkdlb2NvZGVyKCk7CiAgICAgIGdlb2NvZGVyLmdlb2NvZGUoewogICAgICAgIGxvY2F0aW9uOiB0aGlzLmNvb3JkcwogICAgICB9LCBmdW5jdGlvbiAocmVzdWx0cywgc3RhdHVzKSB7CiAgICAgICAgaWYgKHN0YXR1cyA9PT0gIk9LIiAmJiByZXN1bHRzLmxlbmd0aCkgewogICAgICAgICAgdmFyIF9yZXN1bHRzID0gX3NsaWNlZFRvQXJyYXkocmVzdWx0cywgMSksCiAgICAgICAgICAgICAgZ2VvID0gX3Jlc3VsdHNbMF07CgogICAgICAgICAgdmFyIF9nZW8kYWRkcmVzc19jb21wb25lbiA9IF9zbGljZWRUb0FycmF5KGdlby5hZGRyZXNzX2NvbXBvbmVudHMsIDIpLAogICAgICAgICAgICAgIG51bWJlciA9IF9nZW8kYWRkcmVzc19jb21wb25lblswXSwKICAgICAgICAgICAgICBzdHJlZXQgPSBfZ2VvJGFkZHJlc3NfY29tcG9uZW5bMV07CgogICAgICAgICAgX3RoaXMyLmlucHV0TG9jYXRpb24gPSAiIi5jb25jYXQoc3RyZWV0LnNob3J0X25hbWUsICIsICIpLmNvbmNhdChudW1iZXIuc2hvcnRfbmFtZSk7CgogICAgICAgICAgX3RoaXMyLmNvb3Jkc0VudGVyZWQoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGNoYW5nZUFkZHJlc3M6IGZ1bmN0aW9uIGNoYW5nZUFkZHJlc3MoZ2VvKSB7CiAgICAgIHZhciBsb2NhdGlvbiA9IGdlby5nZW9tZXRyeS5sb2NhdGlvbjsKICAgICAgdGhpcy5jb29yZHMgPSB7CiAgICAgICAgbGF0OiBsb2NhdGlvbi5sYXQoKSwKICAgICAgICBsbmc6IGxvY2F0aW9uLmxuZygpCiAgICAgIH07CiAgICAgIHRoaXMuaW5wdXRMb2NhdGlvbiA9ICIiLmNvbmNhdChnZW8ubmFtZSwgIiwgIikuY29uY2F0KGdlby52aWNpbml0eSk7CiAgICAgIHRoaXMuY29vcmRzRW50ZXJlZCgpOwogICAgfSwKICAgIGNvb3Jkc0VudGVyZWQ6IGZ1bmN0aW9uIGNvb3Jkc0VudGVyZWQoKSB7CiAgICAgIGlmICghdGhpcy5pc0Nvb3Jkc0VudGVyZWQpIHsKICAgICAgICB0aGlzLmlzQ29vcmRzRW50ZXJlZCA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICBjb29yZHNEZW5pZWQ6IGZ1bmN0aW9uIGNvb3Jkc0RlbmllZChlcnIpIHsKICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgIH0sCiAgICBoYW5kbGVDaGFuZ2VWaWV3OiBmdW5jdGlvbiBoYW5kbGVDaGFuZ2VWaWV3KCkgewogICAgICB0aGlzLiRlbWl0KCJjaGFuZ2UtdmlldyIsIHZpZXdzLlNFVF9JTkZPX1ZJRVcpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["find-location-view.vue"],"names":[],"mappings":";;;AACA,SAAA,OAAA,QAAA,kBAAA;AACA,OAAA,KAAA,KAAA,MAAA,mBAAA;AACA,OAAA,cAAA,MAAA,mCAAA;AACA,OAAA,OAAA,MAAA,4BAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,oBADA;AAGA,EAAA,UAAA,EAAA;AACA,IAAA,cAAA,EAAA,cADA;AAEA,IAAA,OAAA,EAAA;AAFA,GAHA;AAQA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,MAAA,EAAA;AACA,QAAA,GAAA,EAAA,IADA;AAEA,QAAA,GAAA,EAAA;AAFA,OADA;AAKA,MAAA,eAAA,EAAA,KALA;AAMA,MAAA,aAAA,EAAA,EANA;AAOA,MAAA,IAAA,EAAA;AAPA,KAAA;AAAA,GARA;AAkBA,EAAA,QAAA,EAAA;AACA,IAAA,MAAA,EAAA,OADA;AAEA,IAAA,aAFA,2BAEA;AACA,aAAA,CAAA,CAAA,KAAA,MAAA,CAAA,GAAA,IAAA,CAAA,CAAA,KAAA,MAAA,CAAA,GAAA,IAAA,KAAA,eAAA;AACA;AAJA,GAlBA;AAyBA,EAAA,OAzBA,qBAyBA;AAAA;;AACA,QAAA,SAAA,CAAA,WAAA,EAAA;AACA,MAAA,SAAA,CAAA,WAAA,CAAA,kBAAA,CAAA,gBAAA;AAAA,YAAA,MAAA,QAAA,MAAA;AAAA,YACA,GADA,GACA,MADA,CACA,QADA;AAAA,YACA,GADA,GACA,MADA,CACA,SADA;AAEA,QAAA,KAAA,CAAA,MAAA,GAAA;AAAA,UAAA,GAAA,EAAA,GAAA;AAAA,UAAA,GAAA,EAAA;AAAA,SAAA;;AAEA,QAAA,KAAA,CAAA,aAAA;;AACA,QAAA,KAAA,CAAA,UAAA;AACA,OANA,EAMA,KAAA,YANA;AAOA;AACA,GAnCA;AAqCA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,wBACA;AAAA;;AACA,UAAA,QAAA,GAAA,IAAA,KAAA,MAAA,CAAA,IAAA,CAAA,QAAA,EAAA;AAEA,MAAA,QAAA,CAAA,OAAA,CAAA;AAAA,QAAA,QAAA,EAAA,KAAA;AAAA,OAAA,EAAA,UAAA,OAAA,EAAA,MAAA,EAAA;AACA,YAAA,MAAA,KAAA,IAAA,IAAA,OAAA,CAAA,MAAA,EAAA;AAAA,wCACA,OADA;AAAA,cACA,GADA;;AAAA,qDAEA,GAAA,CAAA,kBAFA;AAAA,cAEA,MAFA;AAAA,cAEA,MAFA;;AAIA,UAAA,MAAA,CAAA,aAAA,aAAA,MAAA,CAAA,UAAA,eAAA,MAAA,CAAA,UAAA;;AAEA,UAAA,MAAA,CAAA,aAAA;AACA;AACA,OATA;AAUA,KAdA;AAeA,IAAA,aAfA,yBAeA,GAfA,EAeA;AAAA,UACA,QADA,GACA,GAAA,CAAA,QADA,CACA,QADA;AAGA,WAAA,MAAA,GAAA;AACA,QAAA,GAAA,EAAA,QAAA,CAAA,GAAA,EADA;AAEA,QAAA,GAAA,EAAA,QAAA,CAAA,GAAA;AAFA,OAAA;AAKA,WAAA,aAAA,aAAA,GAAA,CAAA,IAAA,eAAA,GAAA,CAAA,QAAA;AACA,WAAA,aAAA;AACA,KAzBA;AA0BA,IAAA,aA1BA,2BA0BA;AACA,UAAA,CAAA,KAAA,eAAA,EAAA;AACA,aAAA,eAAA,GAAA,IAAA;AACA;AACA,KA9BA;AA+BA,IAAA,YA/BA,wBA+BA,GA/BA,EA+BA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,KAjCA;AAkCA,IAAA,gBAlCA,8BAkCA;AACA,WAAA,KAAA,CAAA,aAAA,EAAA,KAAA,CAAA,aAAA;AACA;AApCA;AArCA,CAAA","sourcesContent":["<script>\nimport {gmapApi} from \"vue2-google-maps\";\nimport * as views from \"../lib/views-list\";\nimport ManualLocation from \"../components/manual-location.vue\";\nimport SButton from \"../components/s-button.vue\";\n\nexport default {\n  name: \"find-location-view\",\n\n  components: {\n    ManualLocation,\n    SButton,\n  },\n\n  data: () => ({\n    coords: {\n      lat: 50.4,\n      lng: 30.6,\n    },\n    isCoordsEntered: false,\n    inputLocation: \"\",\n    zoom: 17,\n  }),\n\n  computed: {\n    google: gmapApi,\n    isValidCoords() {\n      return !!this.coords.lat && !!this.coords.lng && this.isCoordsEntered;\n    },\n  },\n\n  mounted() {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(({coords}) => {\n        const {latitude: lat, longitude: lng} = coords;\n        this.coords = {lng, lat};\n\n        this.coordsEntered();\n        this.runGeocode();\n      }, this.coordsDenied);\n    }\n  },\n\n  methods: {\n    runGeocode() {\n      const geocoder = new this.google.maps.Geocoder();\n\n      geocoder.geocode({location: this.coords}, (results, status) => {\n        if (status === \"OK\" && results.length) {\n          const [geo] = results;\n          const [number, street] = geo.address_components;\n\n          this.inputLocation = `${street.short_name}, ${number.short_name}`;\n\n          this.coordsEntered();\n        }\n      });\n    },\n    changeAddress(geo) {\n      const {location} = geo.geometry;\n\n      this.coords = {\n        lat: location.lat(),\n        lng: location.lng(),\n      };\n\n      this.inputLocation = `${geo.name}, ${geo.vicinity}`;\n      this.coordsEntered();\n    },\n    coordsEntered() {\n      if (!this.isCoordsEntered) {\n        this.isCoordsEntered = true;\n      }\n    },\n    coordsDenied(err) {\n      console.log(err);\n    },\n    handleChangeView() {\n      this.$emit(\"change-view\", views.SET_INFO_VIEW);\n    },\n  },\n};\n</script>\n\n<template>\n  <div class=\"view find-location-view\">\n    <div class=\"find-location-view__map\">\n      <google-map\n        :center=\"coords\"\n        :zoom=\"zoom\"\n        :options=\"{\n          zoomControl: false,\n          mapTypeControl: false,\n          fullscreenControl: false,\n          streetViewControl: false,\n        }\"\n        map-type-id=\"terrain\"\n        style=\"width: 100%; height: 100%\"\n      >\n        <google-map-marker\n          :position=\"coords\"\n          :icon=\"{\n            url: require('../assets/placeholder.svg')\n          }\"\n        />\n      </google-map>\n    </div>\n\n    <div class=\"find-location-view__bottom-bar\">\n      <manual-location\n        :value=\"inputLocation\"\n        @change=\"changeAddress\"\n      >\n        <s-button\n          :disabled=\"!isCoordsEntered\"\n          @click=\"handleChangeView\"\n        >\n          Знайшов тварину\n        </s-button>\n      </manual-location>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\">\n.find-location-view__map {\n  flex: 1 0;\n}\n\n.find-location-view__bottom-bar {\n  height: 185px;\n  padding: 15px 15px 23px;\n  background: var(--light-100);\n}\n</style>\n"],"sourceRoot":"src/views"}]}