{"remainingRequest":"/Users/mac/Desktop/save-pets-ui/node_modules/babel-loader/lib/index.js!/Users/mac/Desktop/save-pets-ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mac/Desktop/save-pets-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/save-pets-ui/src/components/s-upload.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Desktop/save-pets-ui/src/components/s-upload.vue","mtime":1598014449362},{"path":"/Users/mac/Desktop/save-pets-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/save-pets-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mac/Desktop/save-pets-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/save-pets-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiL1VzZXJzL21hYy9EZXNrdG9wL3NhdmUtcGV0cy11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIgZnJvbSAiL1VzZXJzL21hYy9EZXNrdG9wL3NhdmUtcGV0cy11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9tYWMvRGVza3RvcC9zYXZlLXBldHMtdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwoKLyogZXNsaW50LWRpc2FibGUgbm8tcmVzdHJpY3RlZC1zeW50YXgsIG5vLWF3YWl0LWluLWxvb3AgKi8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJzLXVwbG9hZCIsCiAgaW5oZXJpdEF0dHJzOiBmYWxzZSwKICBwcm9wczogewogICAgbGFiZWw6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgdGlwOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHRvQmFzZTY0OiBmdW5jdGlvbiB0b0Jhc2U2NChmaWxlKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7CgogICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gcmVzb2x2ZShyZWFkZXIucmVzdWx0KTsKICAgICAgICB9OwoKICAgICAgICByZWFkZXIub25lcnJvciA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gcmVqZWN0KGUpOwogICAgICAgIH07CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZVVwbG9hZDogZnVuY3Rpb24gaGFuZGxlVXBsb2FkKF9yZWYpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHRhcmdldCwgZmlsZXMsIHBob3RvcywgX2l0ZXJhdG9yLCBfc3RlcCwgZmlsZSwgcmVzdWx0OwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB0YXJnZXQgPSBfcmVmLnRhcmdldDsKICAgICAgICAgICAgICAgIGZpbGVzID0gdGFyZ2V0LmZpbGVzOwoKICAgICAgICAgICAgICAgIGlmIChmaWxlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBwaG90b3MgPSBbXTsKICAgICAgICAgICAgICAgIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGZpbGVzKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA2OwoKICAgICAgICAgICAgICAgIF9pdGVyYXRvci5zKCk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIGlmICgoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZmlsZSA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnRvQmFzZTY0KGZpbGUpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHBob3Rvcy5wdXNoKHJlc3VsdCk7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIxOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTg7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDYpOwoKICAgICAgICAgICAgICAgIF9pdGVyYXRvci5lKF9jb250ZXh0LnQwKTsKCiAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyMTsKCiAgICAgICAgICAgICAgICBfaXRlcmF0b3IuZigpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5maW5pc2goMjEpOwoKICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgICAgX3RoaXMuJGVtaXQoImlucHV0IiwgW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShfdGhpcy52YWx1ZSksIHBob3RvcykpOwoKICAgICAgICAgICAgICAgIF90aGlzLnJlc2V0RmlsZUlucHV0cygpOwoKICAgICAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1s2LCAxOCwgMjEsIDI0XV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICByZXNldEZpbGVJbnB1dHM6IGZ1bmN0aW9uIHJlc2V0RmlsZUlucHV0cygpIHsKICAgICAgaWYgKHRoaXMuJHJlZnMucHJpbWFyeSkgewogICAgICAgIHRoaXMuJHJlZnMucHJpbWFyeS52YWx1ZSA9ICIiOwogICAgICB9CgogICAgICBpZiAodGhpcy4kcmVmcy5zZWNvbmRhcnkpIHsKICAgICAgICB0aGlzLiRyZWZzLnNlY29uZGFyeS52YWx1ZSA9ICIiOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlUmVtb3ZlOiBmdW5jdGlvbiBoYW5kbGVSZW1vdmUoaWR4KSB7CiAgICAgIHZhciBwaG90b3MgPSB0aGlzLnZhbHVlLmZpbHRlcihmdW5jdGlvbiAoXywgaSkgewogICAgICAgIHJldHVybiBpZHggIT09IGk7CiAgICAgIH0pOwogICAgICB0aGlzLiRlbWl0KCJpbnB1dCIsIHBob3Rvcyk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["s-upload.vue"],"names":[],"mappings":";;;;;;;;AACA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAGA,EAAA,YAAA,EAAA,KAHA;AAKA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KADA;AAKA,IAAA,GAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KALA;AASA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA;AAAA,eAAA,EAAA;AAAA;AAFA;AATA,GALA;AAoBA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,oBACA,IADA,EACA;AACA,aAAA,IAAA,OAAA,CAAA,UAAA,OAAA,EAAA,MAAA,EAAA;AACA,YAAA,MAAA,GAAA,IAAA,UAAA,EAAA;AACA,QAAA,MAAA,CAAA,aAAA,CAAA,IAAA;;AACA,QAAA,MAAA,CAAA,MAAA,GAAA;AAAA,iBAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA;AAAA,SAAA;;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,UAAA,CAAA;AAAA,iBAAA,MAAA,CAAA,CAAA,CAAA;AAAA,SAAA;AACA,OALA,CAAA;AAMA,KARA;AASA,IAAA,YATA,8BASA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAA,MAAA,QAAA,MAAA;AACA,gBAAA,KADA,GACA,MADA,CACA,KADA;;AAAA,oBAGA,KAAA,CAAA,MAHA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAOA,gBAAA,MAPA,GAOA,EAPA;AAAA,uDASA,KATA;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AASA,gBAAA,IATA;AAAA;AAAA,uBAUA,KAAA,CAAA,QAAA,CAAA,IAAA,CAVA;;AAAA;AAUA,gBAAA,MAVA;AAWA,gBAAA,MAAA,CAAA,IAAA,CAAA,MAAA;;AAXA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAcA,gBAAA,KAAA,CAAA,KAAA,CAAA,OAAA,+BAAA,KAAA,CAAA,KAAA,GAAA,MAAA;;AAEA,gBAAA,KAAA,CAAA,eAAA;;AAhBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiBA,KA1BA;AA2BA,IAAA,eA3BA,6BA2BA;AACA,UAAA,KAAA,KAAA,CAAA,OAAA,EAAA;AACA,aAAA,KAAA,CAAA,OAAA,CAAA,KAAA,GAAA,EAAA;AACA;;AAEA,UAAA,KAAA,KAAA,CAAA,SAAA,EAAA;AACA,aAAA,KAAA,CAAA,SAAA,CAAA,KAAA,GAAA,EAAA;AACA;AACA,KAnCA;AAoCA,IAAA,YApCA,wBAoCA,GApCA,EAoCA;AACA,UAAA,MAAA,GAAA,KAAA,KAAA,CAAA,MAAA,CAAA,UAAA,CAAA,EAAA,CAAA;AAAA,eAAA,GAAA,KAAA,CAAA;AAAA,OAAA,CAAA;AACA,WAAA,KAAA,CAAA,OAAA,EAAA,MAAA;AACA;AAvCA;AApBA,CAAA","sourcesContent":["<script>\n/* eslint-disable no-restricted-syntax, no-await-in-loop */\nexport default {\n  name: \"s-upload\",\n\n  inheritAttrs: false,\n\n  props: {\n    label: {\n      type: String,\n      default: null,\n    },\n    tip: {\n      type: String,\n      default: null,\n    },\n    value: {\n      type: Array,\n      default: () => [],\n    },\n  },\n\n  methods: {\n    toBase64(file) {\n      return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.readAsDataURL(file);\n        reader.onload = () => resolve(reader.result);\n        reader.onerror = (e) => reject(e);\n      });\n    },\n    async handleUpload({target}) {\n      const {files} = target;\n\n      if (!files.length) {\n        return;\n      }\n\n      const photos = [];\n\n      for (const file of files) {\n        const result = await this.toBase64(file);\n        photos.push(result);\n      }\n\n      this.$emit(\"input\", [...this.value, ...photos]);\n\n      this.resetFileInputs();\n    },\n    resetFileInputs() {\n      if (this.$refs.primary) {\n        this.$refs.primary.value = \"\";\n      }\n\n      if (this.$refs.secondary) {\n        this.$refs.secondary.value = \"\";\n      }\n    },\n    handleRemove(idx) {\n      const photos = this.value.filter((_, i) => idx !== i);\n      this.$emit(\"input\", photos);\n    },\n  },\n};\n</script>\n\n<template>\n  <div class=\"s-upload\">\n    <label v-if=\"!value.length\">\n      <span\n        v-if=\"label\"\n        class=\"s-upload__label\"\n      >\n        {{label}}\n      </span>\n\n      <div class=\"s-upload__icon\">\n        <img\n          src=\"../assets/camera.svg\"\n          alt=\"Завантажити файли\"\n        >\n      </div>\n\n      <input\n        ref=\"primary\"\n        type=\"file\"\n        v-bind=\"$attrs\"\n        multiple\n        class=\"s-upload__control\"\n        @change=\"handleUpload\"\n      >\n\n      <span\n        v-if=\"tip\"\n        class=\"s-upload__tip\"\n      >\n        {{tip}}\n      </span>\n    </label>\n\n    <ul\n      v-else\n      class=\"s-upload__preview-list\"\n    >\n      <li\n        v-for=\"(photo, key) in value\"\n        :key=\"key\"\n        class=\"s-upload__preview-item\"\n        @click=\"handleRemove(key)\"\n      >\n        <div class=\"s-upload__preview-wrap\">\n          <img\n            :src=\"photo\"\n            :alt=\"`Фото тварини № ${key}`\"\n          >\n        </div>\n      </li>\n\n      <li class=\"s-upload__preview-upload\">\n        <label>\n          <input\n            ref=\"secondary\"\n            type=\"file\"\n            v-bind=\"$attrs\"\n            multiple\n            class=\"s-upload__control\"\n            @change=\"handleUpload\"\n          >\n        </label>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.s-upload {\n  display: flex;\n  justify-content: center;\n\n  label {\n    display: inline-block;\n  }\n}\n\n.s-upload__control {\n  appearance: none;\n  width: 1px;\n  height: 1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  position: absolute;\n}\n\n.s-upload__label {\n  color: var(--secondary);\n  font-size: 16px;\n  text-align: center;\n  display: block;\n}\n\n.s-upload__icon {\n  width: 51px;\n  height: 41px;\n  margin: 12px auto 0;\n}\n\n.s-upload {\n  display: block;\n  margin-top: 5px;\n\n  text-align: center;\n  font-size: 13px;\n  line-height: 20px;\n  letter-spacing: -0.24px;\n  font-style: italic;\n  color: var(--neutral-300);\n}\n\n.s-upload__preview-list {\n  display: flex;\n  flex-wrap: wrap;\n\n  list-style: none;\n  padding: 0;\n}\n\n.s-upload__preview-upload {\n  flex: 1 0 70px;\n  display: flex;\n\n  justify-content: center;\n  align-items: center;\n\n  label {\n    display: block;\n    width: 100%;\n    height: 60px;\n    border-radius: 10px;\n    background: #F1F1F2 url('../assets/plus.svg') center center no-repeat;\n  }\n}\n\n.s-upload__preview-item {\n  flex: 1 0;\n  margin: 15px 5px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.s-upload__preview-wrap {\n  position: relative;\n  width: 70px;\n\n  &::after {\n    content: '';\n\n    position: absolute;\n    right: -5px;\n    top: -5px;\n\n    width: 17px;\n    height: 17px;\n    background: #F1F1F2 url('../assets/close.svg') center center no-repeat;\n    border-radius: 50%;\n  }\n\n  img {\n    width: 70px;\n    height: 60px;\n    object-fit: cover;\n    object-position: center;\n    border-radius: 10px;\n  }\n}\n</style>\n"],"sourceRoot":"src/components"}]}