{"remainingRequest":"/Users/mac/Desktop/save-pets-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/save-pets-ui/src/components/s-upload.vue?vue&type=style&index=0&id=9eeeb1aa&lang=scss&scoped=true&","dependencies":[{"path":"/Users/mac/Desktop/save-pets-ui/src/components/s-upload.vue","mtime":1598014449362},{"path":"/Users/mac/Desktop/save-pets-ui/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/save-pets-ui/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/mac/Desktop/save-pets-ui/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/mac/Desktop/save-pets-ui/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/save-pets-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/save-pets-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnMtdXBsb2FkIHsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwoKICBsYWJlbCB7CiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgfQp9Cgoucy11cGxvYWRfX2NvbnRyb2wgewogIGFwcGVhcmFuY2U6IG5vbmU7CiAgd2lkdGg6IDFweDsKICBoZWlnaHQ6IDFweDsKICBvdmVyZmxvdzogaGlkZGVuOwogIGNsaXA6IHJlY3QoMCwgMCwgMCwgMCk7CiAgcG9zaXRpb246IGFic29sdXRlOwp9Cgoucy11cGxvYWRfX2xhYmVsIHsKICBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5KTsKICBmb250LXNpemU6IDE2cHg7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGRpc3BsYXk6IGJsb2NrOwp9Cgoucy11cGxvYWRfX2ljb24gewogIHdpZHRoOiA1MXB4OwogIGhlaWdodDogNDFweDsKICBtYXJnaW46IDEycHggYXV0byAwOwp9Cgoucy11cGxvYWQgewogIGRpc3BsYXk6IGJsb2NrOwogIG1hcmdpbi10b3A6IDVweDsKCiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGZvbnQtc2l6ZTogMTNweDsKICBsaW5lLWhlaWdodDogMjBweDsKICBsZXR0ZXItc3BhY2luZzogLTAuMjRweDsKICBmb250LXN0eWxlOiBpdGFsaWM7CiAgY29sb3I6IHZhcigtLW5ldXRyYWwtMzAwKTsKfQoKLnMtdXBsb2FkX19wcmV2aWV3LWxpc3QgewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC13cmFwOiB3cmFwOwoKICBsaXN0LXN0eWxlOiBub25lOwogIHBhZGRpbmc6IDA7Cn0KCi5zLXVwbG9hZF9fcHJldmlldy11cGxvYWQgewogIGZsZXg6IDEgMCA3MHB4OwogIGRpc3BsYXk6IGZsZXg7CgogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CgogIGxhYmVsIHsKICAgIGRpc3BsYXk6IGJsb2NrOwogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDYwcHg7CiAgICBib3JkZXItcmFkaXVzOiAxMHB4OwogICAgYmFja2dyb3VuZDogI0YxRjFGMiB1cmwoJy4uL2Fzc2V0cy9wbHVzLnN2ZycpIGNlbnRlciBjZW50ZXIgbm8tcmVwZWF0OwogIH0KfQoKLnMtdXBsb2FkX19wcmV2aWV3LWl0ZW0gewogIGZsZXg6IDEgMDsKICBtYXJnaW46IDE1cHggNXB4OwoKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7Cn0KCi5zLXVwbG9hZF9fcHJldmlldy13cmFwIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgd2lkdGg6IDcwcHg7CgogICY6OmFmdGVyIHsKICAgIGNvbnRlbnQ6ICcnOwoKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHJpZ2h0OiAtNXB4OwogICAgdG9wOiAtNXB4OwoKICAgIHdpZHRoOiAxN3B4OwogICAgaGVpZ2h0OiAxN3B4OwogICAgYmFja2dyb3VuZDogI0YxRjFGMiB1cmwoJy4uL2Fzc2V0cy9jbG9zZS5zdmcnKSBjZW50ZXIgY2VudGVyIG5vLXJlcGVhdDsKICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICB9CgogIGltZyB7CiAgICB3aWR0aDogNzBweDsKICAgIGhlaWdodDogNjBweDsKICAgIG9iamVjdC1maXQ6IGNvdmVyOwogICAgb2JqZWN0LXBvc2l0aW9uOiBjZW50ZXI7CiAgICBib3JkZXItcmFkaXVzOiAxMHB4OwogIH0KfQo="},{"version":3,"sources":["s-upload.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuIA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"s-upload.vue","sourceRoot":"src/components","sourcesContent":["<script>\n/* eslint-disable no-restricted-syntax, no-await-in-loop */\nexport default {\n  name: \"s-upload\",\n\n  inheritAttrs: false,\n\n  props: {\n    label: {\n      type: String,\n      default: null,\n    },\n    tip: {\n      type: String,\n      default: null,\n    },\n    value: {\n      type: Array,\n      default: () => [],\n    },\n  },\n\n  methods: {\n    toBase64(file) {\n      return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.readAsDataURL(file);\n        reader.onload = () => resolve(reader.result);\n        reader.onerror = (e) => reject(e);\n      });\n    },\n    async handleUpload({target}) {\n      const {files} = target;\n\n      if (!files.length) {\n        return;\n      }\n\n      const photos = [];\n\n      for (const file of files) {\n        const result = await this.toBase64(file);\n        photos.push(result);\n      }\n\n      this.$emit(\"input\", [...this.value, ...photos]);\n\n      this.resetFileInputs();\n    },\n    resetFileInputs() {\n      if (this.$refs.primary) {\n        this.$refs.primary.value = \"\";\n      }\n\n      if (this.$refs.secondary) {\n        this.$refs.secondary.value = \"\";\n      }\n    },\n    handleRemove(idx) {\n      const photos = this.value.filter((_, i) => idx !== i);\n      this.$emit(\"input\", photos);\n    },\n  },\n};\n</script>\n\n<template>\n  <div class=\"s-upload\">\n    <label v-if=\"!value.length\">\n      <span\n        v-if=\"label\"\n        class=\"s-upload__label\"\n      >\n        {{label}}\n      </span>\n\n      <div class=\"s-upload__icon\">\n        <img\n          src=\"../assets/camera.svg\"\n          alt=\"Завантажити файли\"\n        >\n      </div>\n\n      <input\n        ref=\"primary\"\n        type=\"file\"\n        v-bind=\"$attrs\"\n        multiple\n        class=\"s-upload__control\"\n        @change=\"handleUpload\"\n      >\n\n      <span\n        v-if=\"tip\"\n        class=\"s-upload__tip\"\n      >\n        {{tip}}\n      </span>\n    </label>\n\n    <ul\n      v-else\n      class=\"s-upload__preview-list\"\n    >\n      <li\n        v-for=\"(photo, key) in value\"\n        :key=\"key\"\n        class=\"s-upload__preview-item\"\n        @click=\"handleRemove(key)\"\n      >\n        <div class=\"s-upload__preview-wrap\">\n          <img\n            :src=\"photo\"\n            :alt=\"`Фото тварини № ${key}`\"\n          >\n        </div>\n      </li>\n\n      <li class=\"s-upload__preview-upload\">\n        <label>\n          <input\n            ref=\"secondary\"\n            type=\"file\"\n            v-bind=\"$attrs\"\n            multiple\n            class=\"s-upload__control\"\n            @change=\"handleUpload\"\n          >\n        </label>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.s-upload {\n  display: flex;\n  justify-content: center;\n\n  label {\n    display: inline-block;\n  }\n}\n\n.s-upload__control {\n  appearance: none;\n  width: 1px;\n  height: 1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  position: absolute;\n}\n\n.s-upload__label {\n  color: var(--secondary);\n  font-size: 16px;\n  text-align: center;\n  display: block;\n}\n\n.s-upload__icon {\n  width: 51px;\n  height: 41px;\n  margin: 12px auto 0;\n}\n\n.s-upload {\n  display: block;\n  margin-top: 5px;\n\n  text-align: center;\n  font-size: 13px;\n  line-height: 20px;\n  letter-spacing: -0.24px;\n  font-style: italic;\n  color: var(--neutral-300);\n}\n\n.s-upload__preview-list {\n  display: flex;\n  flex-wrap: wrap;\n\n  list-style: none;\n  padding: 0;\n}\n\n.s-upload__preview-upload {\n  flex: 1 0 70px;\n  display: flex;\n\n  justify-content: center;\n  align-items: center;\n\n  label {\n    display: block;\n    width: 100%;\n    height: 60px;\n    border-radius: 10px;\n    background: #F1F1F2 url('../assets/plus.svg') center center no-repeat;\n  }\n}\n\n.s-upload__preview-item {\n  flex: 1 0;\n  margin: 15px 5px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.s-upload__preview-wrap {\n  position: relative;\n  width: 70px;\n\n  &::after {\n    content: '';\n\n    position: absolute;\n    right: -5px;\n    top: -5px;\n\n    width: 17px;\n    height: 17px;\n    background: #F1F1F2 url('../assets/close.svg') center center no-repeat;\n    border-radius: 50%;\n  }\n\n  img {\n    width: 70px;\n    height: 60px;\n    object-fit: cover;\n    object-position: center;\n    border-radius: 10px;\n  }\n}\n</style>\n"]}]}